{
  "$schema": "https://railway.app/railway.schema.json",
  "build": {
    "builder": "NIXPACKS",
    "buildCommand": "echo 'üöÄ Starting build process...' && npm install && echo '‚úÖ Root dependencies installed' && echo 'üì¶ Building frontend...' && cd FRONTEND && npm install && echo '‚úÖ Frontend dependencies installed' && (if [ -n \"$VITE_API_BASE_URL\" ]; then echo \"Using VITE_API_BASE_URL=$VITE_API_BASE_URL\"; elif [ -n \"$RAILWAY_PUBLIC_DOMAIN\" ]; then export VITE_API_BASE_URL=\"https://$RAILWAY_PUBLIC_DOMAIN\" && echo \"Using RAILWAY_PUBLIC_DOMAIN=https://$RAILWAY_PUBLIC_DOMAIN\"; else echo \"‚ö†Ô∏è  Warning: VITE_API_BASE_URL not set, using default localhost:8080\"; fi) && npm run build && echo '‚úÖ Frontend build completed' && cd ../BACKEND && npm install && echo '‚úÖ Backend dependencies installed' && npm run db:generate && echo '‚úÖ Prisma client generated' && echo 'üéâ Build process completed successfully!'"
  },
  "deploy": {
    "startCommand": "cd BACKEND && npm run start",
    "restartPolicyType": "ON_FAILURE",
    "restartPolicyMaxRetries": 10
  }
}

