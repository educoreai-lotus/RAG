{
  "service_name": "learning-analytics",
  "description": "MS8 Learning Analytics service that aggregates learning insights across the platform, including enrollments, lesson attempts, assessments, skill acquisitions, and course feedback. Provides role-based dashboards, user-facing reports, and chatbot assistive experiences.",
  "version": "1.0.0",
  "data_structure": {
    "event_id": "string",
    "user_id": "string",
    "course_id": "string",
    "lesson_id": "string",
    "topic_id": "string",
    "lesson_name": "string",
    "started_at": "datetime",
    "completed_at": "datetime",
    "event_timestamp": "datetime",
    "fetched_at": "datetime",
    "enrolled_at": "datetime",
    "failed_at": "datetime",
    "rating": "integer",
    "comment": "text",
    "submitted_at": "datetime",
    "competency_name": "string",
    "skill_name": "string",
    "acquired_date": "date",
    "exam_id": "string",
    "exam_type": "string",
    "attempt_number": "integer",
    "max_attempts": "integer",
    "passing_grade": "number",
    "final_grade": "number",
    "passed": "boolean",
    "skills": "array",
    "_source_table": "string"
  },
  "field_descriptions": {
    "event_id": "Unique identifier for the event record (UUID, generated by MS8)",
    "user_id": "Unique identifier for the learner/user (UUID)",
    "course_id": "Course identifier from Course Builder service",
    "lesson_id": "Lesson identifier (1:1 maps to topic_id in Course Builder v3.0)",
    "topic_id": "Topic identifier from Content Studio",
    "lesson_name": "Display name of the lesson",
    "started_at": "Timestamp when lesson was started (NULL if not started)",
    "completed_at": "Timestamp when lesson was completed (NULL if not completed)",
    "event_timestamp": "Event timestamp used for ordering and filtering",
    "fetched_at": "Timestamp when data was fetched from source microservice",
    "enrolled_at": "Timestamp when user enrolled in course",
    "failed_at": "Timestamp when course was marked as failed",
    "rating": "Course feedback rating (1-5 scale)",
    "comment": "Text feedback comment for course",
    "submitted_at": "Timestamp when feedback or assessment was submitted",
    "competency_name": "Name of the competency",
    "skill_name": "Name of the skill acquired",
    "acquired_date": "Date when skill was acquired",
    "exam_id": "Unique exam identifier (UUID, per-user from Assessment service)",
    "exam_type": "Type of exam: 'baseline' or 'postcourse'",
    "attempt_number": "Ordinal attempt count for the exam",
    "max_attempts": "Maximum allowed attempts for the exam",
    "passing_grade": "Minimum grade required to pass (0-100)",
    "final_grade": "Overall exam score (0-100)",
    "passed": "Boolean indicating if exam was passed (final_grade >= passing_grade)",
    "skills": "Array of per-skill outcome objects from assessment. Each object contains: skill_id (string), skill_name (string), score (number 0-100), status (string: 'acquired' or 'not_acquired'). May be empty array if exam doesn't evaluate specific skills.",
    "_source_table": "Internal field indicating source table (layer1b_enrollments, layer1b_lesson_attempts, layer1b_assessment_attempts, layer1b_user_acquired_skills, layer1b_course_feedback)"
  },
  "sample_data": {
    "event_id": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
    "user_id": "550e8400-e29b-41d4-a716-446655440000",
    "course_id": "course-react-fundamentals",
    "lesson_id": "lesson-001",
    "topic_id": "topic-react-intro",
    "lesson_name": "Introduction to React",
    "started_at": "2025-12-10T14:30:00Z",
    "completed_at": "2025-12-10T15:45:00Z",
    "event_timestamp": "2025-12-10T15:45:00Z",
    "fetched_at": "2025-12-10T16:00:00Z",
    "_source_table": "layer1b_lesson_attempts"
  },
  "notes": [
    "All timestamps are in UTC (TIMESTAMPTZ)",
    "event_id is generated by MS8, not from source microservices",
    "Items come from multiple tables (layer1b_enrollments, layer1b_lesson_attempts, layer1b_assessment_attempts, layer1b_user_acquired_skills, layer1b_course_feedback)",
    "Each item includes _source_table field to identify its origin table",
    "Not all fields appear in every item - fields vary by source table",
    "layer1b_assessment_attempts does NOT have event_id - it uses composite primary key (user_id, exam_id, submitted_at)",
    "layer1b_assessment_attempts does NOT have event_timestamp - it uses submitted_at as the timestamp",
    "lesson_id and topic_id have 1:1 mapping in Course Builder v3.0",
    "exam_type values are strictly 'baseline' or 'postcourse' (not 'quiz' or 'final_exam')",
    "Batch sync combines data from multiple tables and adds _source_table field for identification",
    "For batch sync, data is sorted by timestamp descending (using created_at or event_timestamp) and paginated in memory after combining",
    "Real-time queries are always user-specific and return limited result sets",
    "Skills field in assessments is a JSONB array of objects. Each object has: skill_id (string), skill_name (string), score (number 0-100), status ('acquired' or 'not_acquired'). Example: [{\"skill_id\": \"skill-postgresql-queries\", \"skill_name\": \"PostgreSQL Queries\", \"score\": 92, \"status\": \"acquired\"}, {\"skill_id\": \"skill-database-design\", \"skill_name\": \"Database Design\", \"score\": 90, \"status\": \"acquired\"}]",
    "Example assessment_attempts item structure: {\"user_id\": \"uuid\", \"exam_id\": \"uuid\", \"submitted_at\": \"2025-12-10T10:00:00Z\", \"exam_type\": \"postcourse\", \"course_id\": \"course-database-design\", \"attempt_number\": 1, \"max_attempts\": 2, \"passing_grade\": 70.0, \"final_grade\": 92.0, \"passed\": true, \"skills\": [{\"skill_id\": \"skill-postgresql-queries\", \"skill_name\": \"PostgreSQL Queries\", \"score\": 92, \"status\": \"acquired\"}], \"fetched_at\": \"2025-12-10T10:05:00Z\", \"_source_table\": \"layer1b_assessment_attempts\"}",
    "All data is fetched from other microservices and stored in MS8's database"
  ]
}